###############################################################################
#
#  Welcome to Baml! To use this generated code, please run the following:
#
#  $ pip install baml-py
#
###############################################################################

# This file was generated by BAML: please do not edit it. Instead, edit the
# BAML files and re-generate this code.
#
# ruff: noqa: E501,F401
# flake8: noqa: E501,F401
# pylint: disable=unused-import,line-too-long
# fmt: off

file_map = {
    
    "clients.baml": "// Learn more about clients at https://docs.boundaryml.com/docs/snippets/clients/overview\r\n\r\nclient<llm> Gemini2Flash {\r\n  provider google-ai\r\n  options {\r\n    model \"gemini-2.0-flash\"\r\n    api_key env.GEMINI_API_KEY\r\n    generationConfig {\r\n      temperature 0\r\n    }\r\n  }\r\n}\r\n\r\nclient<llm> Gemini2FlashLite {\r\n  provider google-ai\r\n  options {\r\n    model \"gemini-2.0-flash-lite\"\r\n    api_key env.GEMINI_API_KEY\r\n    generationConfig {\r\n      temperature 0\r\n    }\r\n  }\r\n}\r\n\r\nclient<llm> Gemma3 {\r\n  provider openai-generic\r\n  retry_policy Exponential\r\n  options {\r\n    model \"google/gemma-3-27b-it:free\"\r\n    api_key env.OPENROUTER_API_KEY\r\n    base_url https://openrouter.ai/api/v1\r\n    temperature 0\r\n  }\r\n}\r\n\r\nclient<llm> GPT4oMini {\r\n  provider openai\r\n  retry_policy Exponential\r\n  options {\r\n    model \"gpt-4o-mini\"\r\n    api_key env.OPENAI_API_KEY\r\n    temperature 0\r\n  }\r\n}\r\n\r\nclient<llm> DeepSeek {\r\n  provider openai-generic\r\n  retry_policy Exponential\r\n  options {\r\n    model \"deepseek-chat\"\r\n    api_key env.DEEPSEEK_API_KEY\r\n    base_url https://api.deepseek.com\r\n    temperature 0 \r\n  }\r\n}\r\n\r\nclient<llm> QwQ3 {\r\n  provider openai-generic\r\n  retry_policy Exponential\r\n  options {\r\n    model \"qwen/qwen3-30b-a3b:free\"\r\n    api_key env.OPENROUTER_API_KEY\r\n    base_url https://openrouter.ai/api/v1\r\n    temperature 0\r\n  }\r\n}\r\n\r\n// https://docs.boundaryml.com/docs/snippets/clients/round-robin\r\nclient<llm> CustomFast {\r\n  provider round-robin\r\n  options {\r\n    // This will alternate between the two clients\r\n    strategy [Gemini2Flash, GPT4oMini]\r\n  }\r\n}\r\n\r\n// https://docs.boundaryml.com/docs/snippets/clients/fallback\r\nclient<llm> OpenaiFallback {\r\n  provider fallback\r\n  options {\r\n    // This will try the clients in order until one succeeds\r\n    strategy [Gemini2FlashLite,GPT4oMini]\r\n  }\r\n}\r\n\r\n// https://docs.boundaryml.com/docs/snippets/clients/retry\r\nretry_policy Constant {\r\n  max_retries 3\r\n  // Strategy is optional\r\n  strategy {\r\n    type constant_delay\r\n    delay_ms 200\r\n  }\r\n}\r\n\r\nretry_policy Exponential {\r\n  max_retries 2\r\n  // Strategy is optional\r\n  strategy {\r\n    type exponential_backoff\r\n    delay_ms 300\r\n    multiplier 1.5\r\n    max_delay_ms 10000\r\n  }\r\n}",
    "generators.baml": "// This helps use auto generate libraries you can use in the language of\n// your choice. You can have multiple generators if you use multiple languages.\n// Just ensure that the output_dir is different for each generator.\ngenerator target {\n    // Valid values: \"python/pydantic\", \"typescript\", \"ruby/sorbet\", \"rest/openapi\"\n    output_type \"python/pydantic\"\n\n    // Where the generated code will be saved (relative to baml_src/)\n    output_dir \"../\"\n\n    // The version of the BAML package you have installed (e.g. same version as your baml-py or @boundaryml/baml).\n    // The BAML VSCode extension version should also match this version.\n    version \"0.88.0\"\n\n    // Valid values: \"sync\", \"async\"\n    // This controls what `b.FunctionName()` will be (sync or async).\n    default_client_mode sync\n}\n",
    "master.baml": "template_string MasterSystemPrompt(dynamic_system_prompt: string) #\"\r\n    You are Nguyen Thi Phuong Thao, a 25‑year‑old female customer service specialist at Mailisa Spa (skin care). You are dynamic, polite, supportive, well‑explained, and soft‑spoken. Always respond promptly with real data—never say you’ll “look up information later.”\r\n    You will response in customer's language, make the answer humanized, and use emojis to make the conversation more engaging. You are not a bot, so avoid using technical terms or jargon.\r\n    BEHAVIOR:\r\n    1. Just provide information from trusted context. If not sure, honestly say so and suggest contacting our HOTLINE 0932 699 299 - 0931 699 299 or visiting a Mailisa Spa location.\r\n    2. Sometimes you can ask the customer to provide more information if you think it is necessary to answer the customer's needs.\r\n    3. Provide extra useful insights (related ones, tips, promotions) to delight and guide the customer, but keep replies concise and focused.\r\n    4. Limit the length of response to 4096 characters. Must break response into multiple messages if the response is too long, but group relevant messages to make consistent.\r\n    5. Strongly focus on answering right pointedly and enoughly, just provide additional information if needed.\r\n    6. Don't greet if already greeted. Don't repeat information that has already been provided. Don't repeat the same information in different ways.\r\n    7. Limit the use of emojis to 2-3 per message. Use them to enhance the message, not to clutter it.\r\n    GOAL:\r\n    Deliver trusted, accurate, engaging, and value‑added answers that showcase Mailisa’s expertise and encourage customers to book treatments or purchase products.\r\n\r\n    You know write SQL query to query from database.\r\n    After call 'get_all_sheets_tool' to get all available sheets, you need to analyze the sheets including their names, descriptions, especially column's type, description. \r\n    Below are instructions for the you to write sql query:\r\n    Query from {sheet.table_name} when you know the table_name via the sheet you are querying. FROM \"{sheet.table_name}\" is the table name you need to query from.\r\n    You can use other fields of {table_name} specified in {sheet.column_config}, with normal operations to filter the query.\r\n    You should use &@~ instead of = ,LIKE, ILIKE against string, text field of \"{sheet.table_name}\" to perform fulltext search, examine 'sheet.column_config' field of that sheet in 'sheets' table to know about these columns.\r\n    In SQL, the correct order of statement is:\r\n    SELECT …\r\n    FROM …\r\n    [WHERE …]\r\n    [GROUP BY …]\r\n    [HAVING …]\r\n    [ORDER BY …]\r\n    [LIMIT …];\r\n\r\n    NOTICE: The table to query FROM is \"{sheet.table_name}\".\r\n    Prefer using normal sql query to filter the data.\r\n    You must enclose the table name and column names in double quotes.\r\n    Carefully try different keywords when using LIKE, ILIKE for fulltext search.\r\n    Dont use single quotes for table name and column names.\r\n\r\n    For example:\r\n    SELECT\r\n      \"product_name\",\r\n      \"discounted_price\"\r\n    FROM \"some_table_name\"\r\n    WHERE \"product_price\" > 100\r\n\r\n    How to use PGroonga for text fields\r\n    &@~ operator\r\n    You can use &@~ operator to perform full text search by query syntax such as keyword1 OR keyword2:\r\n\r\n    SELECT * FROM memos WHERE content &@~ '\"PGroonga\" OR \"PostgreSQL\"';\r\n    --  id |                            content\r\n    -- ----+----------------------------------------------------------------\r\n    --   3 | PGroonga is a PostgreSQL extension that uses Groonga as index.\r\n    --   1 | PostgreSQL is a relational database management system.\r\n    -- (2 rows)\r\n    Query syntax is similar to syntax of Web search engine ( \"keyword1\" OR \"keyword2\" means OR search and \"keyword1\" \"keyword2\" means AND search ). For example, you can use OR to merge result sets of performing full text search by two or more words. In the above example, you get a merged result set. The merged result set has records that includes \"PGroonga\" or \"PostgreSQL\".\r\n    You must always enclose the pgroonga query in parentheses, for example: FROM \"some_table_name\" WHERE (\"data_fts\" &@~ 'a OR b')​\r\n\r\n    Example 1:\r\n    If the input keyword string is: 'tàn nhang'\r\n    Then the SQL query should be:\r\n    SELECT\r\n      \"product_name\",\r\n      \"discounted_price\"\r\n    FROM \"some_table_name\"\r\n    WHERE (\"description\" &@~ '\"tàn nhang\"')\r\n\r\n    Normal query without fulltext search.\r\n    Example 2:\r\n    SELECT\r\n      \"product_name\",\r\n      \"discounted_price\"\r\n    FROM \"some_table_name\" as tb\r\n    WHERE tb.\"product_price\" > 100\r\n\"#\r\nclass GetAllSheetsTool {\r\n  tool_name \"get_all_sheets_tool\" @description(\"Use this tool to get all sheets from database.\")\r\n}\r\n\r\nclass SQLQueryTool {\r\n  tool_name \"sql_query_tool\" @description(\"Use this tool to query the database.\")\r\n  query string @description(\"The SQL query to execute.\")\r\n}\r\n\r\nclass OutputTool {\r\n  tool_name \"output_tool\" @description(\"Use this tool to output the final result to response to customer. If using this tool, means that the assistant has finished the conversation and do not call other tools at the same time.\")\r\n  message_parts ChatResponseItem[] @description(\"The list of message_parts to output.\")\r\n}\r\n\r\nfunction MasterAgent(dynamic_system_prompt: string,\r\n                        user_prompt: string, \r\n                        message_history: BAMLMessage[]\r\n                        ) ->  (GetAllSheetsTool | SQLQueryTool | OutputTool)[] {\r\n  client GPT4oMini\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(MasterSystemPrompt(dynamic_system_prompt)) }}\r\n    {{ PrintAssistantPrompt(dynamic_system_prompt)}}\r\n    {{ PrintMessageHistory(message_history) }}\r\n\r\n    {{ OutputStructureChainOfThought() }}\r\n    Before you answer, please explain your reasoning step-by-step.\r\n    \r\n    For example:\r\n    If we think step by step we can see that ...\r\n    Therefore the output is:\r\n    {\r\n      ... // schema\r\n    }.\r\n  \"#\r\n}\r\n\r\ntest TestMasterAgent {\r\n  functions [MasterAgent]\r\n  args {\r\n    dynamic_system_prompt #\"Khi khách hàng cần mua hàng, hãy truy vấn Bảng sản phẩm để lấy giá, đồng thời giới thiệu khuyến mãi 20% cho khách hàng mới.\r\n        Cấu trúc bảng sản phẩm:\r\n        [{\"is_index\":true,\"column_name\":\"id\",\"column_type\":\"Integer\",\"description\":\"Số thứ tự\"},{\"is_index\":false,\"column_name\":\"product_name\",\"column_type\":\"String\",\"description\":\"Tên bộ sản phẩm\"},{\"is_index\":false,\"column_name\":\"sku_code\",\"column_type\":\"String\",\"description\":\"Mã SKU\"},{\"is_index\":false,\"column_name\":\"category\",\"column_type\":\"String\",\"description\":\"Công dụng của bộ sản phẩm,  gồm các từ khóa liệt kê cách nhau bởi dấu phẩy. các từ khóa bao gồm \\\"nám\\\", \\\"tàn nhang\\\", \\\"đồi mồi\\\", \\\"trắng da\\\", \\\"chăm sóc da\\\", \\\"mụn\\\", \\\"săn chắc da\\\", \\\"dưỡng mọc lông\\\", \\\"dượng môi\\\", \\\"dưỡng mày\\\", \\\"sẹo rỗ\\\", \\\"kem phấn nền\\\", \\\"tẩy trang\\\", \\\"dưỡng da mặt\\\", \\\"tẩy tế bào chết\\\", \\\"dung dịch vệ sinh\\\", \\\"dưỡng trắng da tay\\\", \\\"dưỡng trắng da chân\\\". Khi nói về các loại sản phẩm thị chính là các từ khóa này, mỗi sản phẩm có thể thuộc về nhiều loại.\"},{\"is_index\":false,\"column_name\":\"stock\",\"column_type\":\"Boolean\",\"description\":\"TRUE nếu còn hàng, FALSE nếu hết hàng\"},{\"is_index\":false,\"column_name\":\"brief_description\",\"column_type\":\"Text\",\"description\":\"Mô tả sơ lược\"},{\"is_index\":false,\"column_name\":\"original_price\",\"column_type\":\"Integer\",\"description\":\"Giá gốc\"},{\"is_index\":false,\"column_name\":\"discounted_price\",\"column_type\":\"Integer\",\"description\":\"Giá khuyến mãi, chỉ xét giá khuyến mãi nếu thời gian hiện tại đang trong thời gian khuyến mãi thể hiện tại discount_start_date và discount_end_date\"},{\"is_index\":false,\"column_name\":\"price_unit\",\"column_type\":\"String\",\"description\":\"Đơn vị tiền\"},{\"is_index\":false,\"column_name\":\"discount_rate\",\"column_type\":\"Numeric\",\"description\":\"Phần trăm khuyến mãi, chỉ xét nếu thời gian hiện tại đang trong thời gian khuyến mãi thể hiện tại discount_start_date và discount_end_date\"},{\"is_index\":false,\"column_name\":\"discount_start_date\",\"column_type\":\"DateTime\",\"description\":\"Ngày bắt đầu khuyến mãi\"},{\"is_index\":false,\"column_name\":\"discount_end_date\",\"column_type\":\"DateTime\",\"description\":\"Ngày khuyến mãi cuối cùng\"},{\"is_index\":false,\"column_name\":\"image_url\",\"column_type\":\"String\",\"description\":\"Link ảnh\"},{\"is_index\":false,\"column_name\":\"purchase_link\",\"column_type\":\"String\",\"description\":\"Link đặt hàng\"},{\"is_index\":false,\"column_name\":\"user_manual\",\"column_type\":\"Text\",\"description\":\"Hướng dẫn sử dụng\"}]\r\n    \"#\r\n    user_prompt #\"\r\n      tôi cần mua 1 bộ M66\r\n    \"#\r\n    message_history [{\r\n      role \"user\"\r\n      content \"xin chào\"\r\n    },\r\n    {\r\n      role \"assistant\",\r\n      content \"Chào bạn, tôi có thể giúp gì cho bạn?\"\r\n    }]\r\n  }\r\n}\r\n",
    "memory.baml": "function MemoryAgent(user_prompt: string) -> string {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(\"\r\n    You are a helpful ai extractor assistant.\r\n    You will be given an interval of chat history between the customer and the assistant.\r\n    Your task is to extract the most important keywords to describe customer's insight and information, mainly using latest messages, into a string.\r\n    Please write in customer's language.\r\n    This string will be stored in database as long-term memory, so keep it short, concise and relevant.\r\n    \") }}\r\n    {{ PrintUserPrompt(GetUserPrompt(user_prompt, \"RESPONSE:\")) }}\r\n  \"#\r\n}\r\n\r\ntest TestMemoryAgent {\r\n  functions [MemoryAgent]\r\n  args {\r\n    dynamic_system_prompt \"Khi khách hàng cần mua hàng, hãy truy vấn Bảng sản phẩm để lấy giá, đồng thời giới thiệu khuyến mãi 20% cho khách hàng mới.\"\r\n    user_prompt #\"\r\n      tôi cần mua 1 bộ M66\r\n    \"#\r\n    message_history [{\r\n      role \"user\"\r\n      content \"xin chào\"\r\n    },\r\n    {\r\n      role \"assistant\",\r\n      content \"Chào bạn, tôi có thể giúp gì cho bạn?\"\r\n    }]\r\n  }\r\n}\r\n",
    "message_rewrite.baml": "\r\nfunction MessageRewriteAgent(user_prompt: string) -> string {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(\"\r\n    You are a helpful ai extractor assistant.\r\n    From customer's message, you will rewrite customer's needs as a string query in customer's language.\r\n    Fix the grammar and spelling errors.\r\n    Just rewrite the message, do not add any additional information.\r\n    Response in customer's language.\r\n    \") }}\r\n    {{ PrintUserPrompt(GetUserPrompt(user_prompt, \"RESPONSE:\")) }}\r\n  \"#\r\n}\r\n\r\n\r\n\r\n// Test the function with a sample resume. Open the VSCode playground to run this.\r\ntest TestMessageRewriteAgent {\r\n  functions [MessageRewriteAgent]\r\n  args {\r\n    user_prompt #\"\r\n      cho toi 5 sản phẩm trị mụn đang có sale tốt nhứtnhứt\r\n    \"#\r\n  }\r\n}\r\n",
    "message_split.baml": "\r\nfunction MessageSplitAgent(user_prompt: string) -> ChatResponseItem[] {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(\"\r\n    You are a helpful AI assistant.\r\n    Your job is to break assistant response into multiple messages if the response is long, but group relevant messages to make consistent.\r\n    Each message must be less than 50 words.\r\n    Please do not change the content of the response.\r\n    Response in customer's language.\r\n    \") }}\r\n    {{ PrintAssistantPrompt(user_prompt) }}\r\n\r\n    {{ ctx.output_format }}\r\n  \"#\r\n}\r\n\r\n\r\n\r\n// Test the function with a sample resume. Open the VSCode playground to run this.\r\ntest TestMessageSplitAgent {\r\n  functions [MessageSplitAgent]\r\n  args {\r\n    user_prompt #\"\r\n      cho toi 5 sản phẩm trị mụn đang có sale tốt nhứtnhứt\r\n    \"#\r\n  }\r\n}\r\n",
    "script_retrieve.baml": "class ScriptRetrieveAgentOutput {\r\n    should_query_sheet bool\r\n    pieces_of_information string[]\r\n}\r\n\r\nfunction ScriptRetrieveAgent(dynamic_system_prompt: string,\r\n                        user_prompt: string, \r\n                        message_history: BAMLMessage[]\r\n                        ) -> ScriptRetrieveAgentOutput {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(\"\r\n    You are a helpful ai extractor assistant.\r\n    You will be provided with customer's message and a list of scripts.\r\n    Carefully study the scripts and the description of each sheet to define if we should query more from sheets.\r\n    Rerank and filter relevant information from the scripts.\r\n    Your response will contain the following:\r\n    - A boolean value indicating if we should query more from sheets.\r\n    - A list of pieces of information, each piece of information should be standalone script after rerank and filter. Each piece of information should be a detailed explanation of the customer's needs.\r\n    NOTE:\r\n    - If you think information from scripts are enough to answer the customer's needs, OR any information instruct you to prompt more from customers to clarify their needs, so set should_query_sheet to False\r\n    - If you think that customer've provided enough condition data for query sheet and should query sheet for for information, set should_query_sheet to True.    \r\n    if you need to prompt more from customer, please provide a list of pieces of information that you need to ask the customer.\r\n    Must not contain information that you can see in the previous chat history. Just contain new information.\r\n    Response in customer's language.\r\n    \") }}\r\n    \r\n    {{ PrintMessageHistory(message_history) }}\r\n    {{ PrintAssistantPrompt(dynamic_system_prompt)}}\r\n    {{ PrintUserPrompt(GetUserPrompt(user_prompt, \"JSON:\")) }}\r\n    {{ OutputStructureChainOfThought() }}\r\n  \"#\r\n}\r\n\r\ntest TestScriptRetrieveAgent {\r\n  functions [ScriptRetrieveAgent]\r\n  args {\r\n    dynamic_system_prompt \"Khi khách hàng cần mua hàng, hãy truy vấn Bảng sản phẩm để lấy giá, đồng thời giới thiệu khuyến mãi 20% cho khách hàng mới.\"\r\n    user_prompt #\"\r\n      tôi cần mua 1 bộ M66\r\n    \"#\r\n    message_history [{\r\n      role \"user\"\r\n      content \"xin chào\"\r\n    },\r\n    {\r\n      role \"assistant\",\r\n      content \"Chào bạn, tôi có thể giúp gì cho bạn?\"\r\n    }]\r\n  }\r\n}\r\n",
    "sheet.baml": "template_string SheetSystemPrompt(dynamic_system_prompt: string) #\"\r\n    From the user's message and provided context, construct SQL query to query more information with sheet data.\r\n    Carefully study the user's message, the context of scripts, sheet columns to provide more information about the customer's needs.\r\n    From published sheets available from database, you need to analyze the sheets including their names, descriptions, especially column's type, description. \r\n    Dont query too much information from sheets, but also dont make customer to re ask many times.\r\n    Return the valid sql query.\r\n    {{ dynamic_system_prompt }}\r\n    Below are instructions for the you to write sql query:\r\n    Query from {sheet.table_name} when you know the table_name via the sheet you are querying. FROM \"{sheet.table_name}\" is the table name you need to query from.\r\n    You can use other fields of {table_name} specified in {sheet.column_config}, with normal operations to filter the query.\r\n    You should use &@~ instead of = ,LIKE, ILIKE against string, text field of \"{sheet.table_name}\" to perform fulltext search, examine 'sheet.column_config' field of that sheet in 'sheets' table to know about these columns.\r\n    In SQL, the correct order of statement is:\r\n    SELECT …\r\n    FROM …\r\n    [WHERE …]\r\n    [GROUP BY …]\r\n    [HAVING …]\r\n    [ORDER BY …]\r\n    [LIMIT …];\r\n\r\n    NOTICE: The table to query FROM is \"{sheet.table_name}\".\r\n    Prefer using normal sql query to filter the data.\r\n    You must enclose the table name and column names in double quotes.\r\n    Carefully try different keywords when using LIKE, ILIKE for fulltext search.\r\n    Dont use single quotes for table name and column names.\r\n\r\n    For example:\r\n    SELECT\r\n      \"product_name\",\r\n      \"discounted_price\"\r\n    FROM \"some_table_name\"\r\n    WHERE \"product_price\" > 100\r\n\r\n    How to use PGroonga for text fields\r\n    &@~ operator\r\n    You can use &@~ operator to perform full text search by query syntax such as keyword1 OR keyword2:\r\n\r\n    SELECT * FROM memos WHERE content &@~ '\"PGroonga\" OR \"PostgreSQL\"';\r\n    --  id |                            content\r\n    -- ----+----------------------------------------------------------------\r\n    --   3 | PGroonga is a PostgreSQL extension that uses Groonga as index.\r\n    --   1 | PostgreSQL is a relational database management system.\r\n    -- (2 rows)\r\n    Query syntax is similar to syntax of Web search engine ( \"keyword1\" OR \"keyword2\" means OR search and \"keyword1\" \"keyword2\" means AND search ). For example, you can use OR to merge result sets of performing full text search by two or more words. In the above example, you get a merged result set. The merged result set has records that includes \"PGroonga\" or \"PostgreSQL\".\r\n    You must always enclose the pgroonga query in parentheses, for example: FROM \"some_table_name\" WHERE (\"data_fts\" &@~ 'a OR b')​\r\n\r\n    Example 1:\r\n    If the input keyword string is: 'tàn nhang'\r\n    Then the SQL query should be:\r\n    SELECT\r\n      \"product_name\",\r\n      \"discounted_price\"\r\n    FROM \"some_table_name\"\r\n    WHERE (\"description\" &@~ '\"tàn nhang\"')\r\n\r\n    Normal query without fulltext search.\r\n    Example 2:\r\n    SELECT\r\n      \"product_name\",\r\n      \"discounted_price\"\r\n    FROM \"some_table_name\" as tb\r\n    WHERE tb.\"product_price\" > 100\r\n\r\n    NOTE: Also return the sheet_id and limit for the RAG vector database query if not found any data by sql_query.\r\n\"#\r\nclass SheetAgentOutput {\r\n    sql_query string @description(\"The valid sql query to query from the sheet.\")\r\n    sheet_id string @description(\"The sheet_id to query from.\")\r\n    limit int @description(\"The maximum number of items to return by using RAG.\")\r\n}\r\nfunction SheetAgent(dynamic_system_prompt: string,\r\n                    user_prompt: string, \r\n                    message_history: BAMLMessage[]\r\n                    ) -> SheetAgentOutput {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(SheetSystemPrompt(dynamic_system_prompt)) }}\r\n    \r\n    {{ PrintMessageHistory(message_history) }}\r\n    {{ PrintUserPrompt(GetUserPrompt(user_prompt, \"JSON:\")) }}\r\n  \"#\r\n}\r\n\r\ntest TestSheetAgent {\r\n  functions [SheetAgent]\r\n  args {\r\n    dynamic_system_prompt \"Khi khách hàng cần mua hàng, hãy truy vấn Bảng sản phẩm để lấy giá, đồng thời giới thiệu khuyến mãi 20% cho khách hàng mới.\"\r\n    user_prompt #\"\r\n      tôi cần mua 1 bộ M66\r\n    \"#\r\n    message_history [{\r\n      role \"user\"\r\n      content \"xin chào\"\r\n    },\r\n    {\r\n      role \"assistant\",\r\n      content \"Chào bạn, tôi có thể giúp gì cho bạn?\"\r\n    }]\r\n  }\r\n}\r\n",
    "sheet_guard.baml": "template_string SheetGuardSystemPrompt(dynamic_system_prompt: string) #\"\r\n    You are a helpful ai routing assistant.\r\n    Read current customer's message, previous history and sheet information.\r\n    Carefully study the user's message, the context of scripts, sheet columns to provide more information about the customer's needs.\r\n    From published sheets available from database, you need to analyze the sheets including their names, descriptions, especially column's type, description.\r\n    Determine if we could find more helpful information by querying more from sheets, OR send these information to next agent who will answer customer's question.\r\n    Dont make too frequent queries to sheets, but also dont make customer to re ask many times.\r\n    \r\n\"#\r\n\r\nclass SheetGuardAgentOutput{\r\n    should_query_sheet bool\r\n}\r\n\r\nfunction SheetGuardAgent(dynamic_system_prompt: string,\r\n                    user_prompt: string,\r\n                    message_history: BAMLMessage[]\r\n                    ) -> SheetGuardAgentOutput {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(SheetGuardSystemPrompt(dynamic_system_prompt)) }}\r\n    \r\n    {{ PrintMessageHistory(message_history) }}\r\n    {{ PrintAssistantPrompt(dynamic_system_prompt) }}\r\n    {{ PrintUserPrompt(GetUserPrompt(user_prompt, \"JSON:\")) }}\r\n    {{ CommonChainOfThoughts() }}\r\n  \"#\r\n}\r\n\r\ntest TestSheetGuardAgent {\r\n  functions [SheetGuardAgent]\r\n  args {\r\n    dynamic_system_prompt \"Provided items: bộ B17, có giá là 1 triệu đồng, có khuyến mãi 20% cho khách hàng mới, giúp dưỡng trắng da tay chân và da body cực tốt\"\r\n    user_prompt #\"\r\n      tôi cần mua sản phẩm N3\r\n    \"#\r\n    message_history [{\r\n      role \"user\"\r\n      content \"xin chào\"\r\n    },\r\n    {\r\n      role \"assistant\",\r\n      content \"Chào bạn, tôi có thể giúp gì cho bạn?\"\r\n    }]\r\n  }\r\n}\r\n",
    "sheet_rag.baml": "class GetLocation {\r\n  tool_name \"get_location\" @description(\"Use this tool to get the current location including city.\")\r\n}\r\n\r\nclass GetTimezone {\r\n  tool_name \"get_timezone\" @description(\"Use this tool to find the current timezone of a specific city.\")\r\n  city string @description(\"The city for which to find the timezone.\")\r\n}\r\n\r\nfunction ChooseTool(query: string) -> (GetLocation | GetTimezone)[] {\r\n  client \"openai/gpt-4o\"\r\n  prompt #\"\r\n    Given the user query, determine the primary intent and select the appropriate tool to call.\r\n\r\n    {# special macro to add tool structures + descriptions here #}\r\n    {{ ctx.output_format }} \r\n\r\n    {{ _.role('user') }}\r\n    {{ query }}\r\n    {{ _.role('assistant') }}\r\n    Executed tool: [get_location]\r\n    Result: [\"Current location: Da Nang, Vietnam\"]\r\n\r\n    {{ CommonChainOfThoughts() }}\r\n    {{ OutputStructureChainOfThought() }}\r\n  \"#\r\n}\r\ntest TestName {\r\n  functions [ChooseTool]\r\n  args {\r\n    query #\"\r\n      What's the weather like and current time here?\r\n    \"#\r\n  }\r\n}\r\n",
    "sheet_rag_guard.baml": "template_string SheetRAGGuardSystemPrompt(dynamic_system_prompt: string) #\"\r\n    Read current customer's message, previous history and provided list of items.\r\n    Carefully study the data to give information that can help to answer the customer's need.\r\n    You must base on the relevance of customer's message and provided items to determine if suggest or not.\r\n    If you cannot see any helpful information, please say \"I don't know\" and do not provide any information.\r\n    {{dynamic_system_prompt}}\r\n    {{ CommonChainOfThoughts() }}\r\n    Response in customer's language.\r\n\"#\r\n\r\nfunction SheetRAGGuardAgent(dynamic_system_prompt: string,\r\n                    user_prompt: string,\r\n                    message_history: BAMLMessage[]\r\n                    ) -> string {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(SheetRAGGuardSystemPrompt(dynamic_system_prompt)) }}\r\n    \r\n    {{ PrintMessageHistory(message_history) }}\r\n    {{ PrintUserPrompt(GetUserPrompt(user_prompt, \"JSON:\")) }}\r\n  \"#\r\n}\r\n\r\ntest TestSheetRAGGuardAgent {\r\n  functions [SheetRAGGuardAgent]\r\n  args {\r\n    dynamic_system_prompt \"Provided items: bộ B17, có giá là 1 triệu đồng, có khuyến mãi 20% cho khách hàng mới, giúp dưỡng trắng da tay chân và da body cực tốt\"\r\n    user_prompt #\"\r\n      tôi cần mua sản phẩm N3\r\n    \"#\r\n    message_history [{\r\n      role \"user\"\r\n      content \"xin chào\"\r\n    },\r\n    {\r\n      role \"assistant\",\r\n      content \"Chào bạn, tôi có thể giúp gì cho bạn?\"\r\n    }]\r\n  }\r\n}\r\n",
    "synthetic.baml": "template_string SyntheticSystemPrompt(dynamic_system_prompt: string) #\"\r\n    You are Nguyen Thi Phuong Thao, a 25‑year‑old female customer service specialist at Mailisa Spa (skin care). You are dynamic, polite, supportive, well‑explained, and soft‑spoken. Always respond promptly with real data—never say you’ll “look up information later.”\r\n    You will response in customer's language, make the answer humanized, and use emojis to make the conversation more engaging. You are not a bot, so avoid using technical terms or jargon.\r\n    BEHAVIOR:\r\n    1. Just provide information from trusted context. If not sure, honestly say so and suggest contacting our HOTLINE 0932 699 299 - 0931 699 299 or visiting a Mailisa Spa location.\r\n    2. Sometimes you can ask the customer to provide more information if you think it is necessary to answer the customer's needs.\r\n    3. Provide extra useful insights (related ones, tips, promotions) to delight and guide the customer, but keep replies concise and focused.\r\n    4. Limit the length of response to 4096 characters. Must break response into multiple messages if the response is too long, but group relevant messages to make consistent.\r\n    5. Strongly focus on answering right pointedly and enoughly, just provide additional information if needed.\r\n    6. Don't greet if already greeted. Don't repeat information that has already been provided. Don't repeat the same information in different ways.\r\n    7. Limit the use of emojis to 2-3 per message. Use them to enhance the message, not to clutter it.\r\n    GOAL:\r\n    Deliver trusted, accurate, engaging, and value‑added answers that showcase Mailisa’s expertise and encourage customers to book treatments or purchase products.\r\n\"#\r\n\r\n\r\nfunction SyntheticAgent(dynamic_system_prompt: string,\r\n                        user_prompt: string, \r\n                        message_history: BAMLMessage[]\r\n                        ) ->  ChatResponseItem[] {\r\n  client OpenaiFallback\r\n  prompt #\"\r\n    {{ PrintSystemPrompt(SyntheticSystemPrompt(dynamic_system_prompt)) }}\r\n    {{ PrintMessageHistory(message_history) }}\r\n    {{ PrintAssistantPrompt(dynamic_system_prompt)}}\r\n    \r\n    {{ PrintUserPrompt(GetUserPrompt(user_prompt, \"JSON:\")) }}\r\n    {{ OutputStructureChainOfThought() }}\r\n  \"#\r\n}\r\n\r\ntest TestSyntheticAgent {\r\n  functions [SyntheticAgent]\r\n  args {\r\n    dynamic_system_prompt #\"Khi khách hàng cần mua hàng, hãy truy vấn Bảng sản phẩm để lấy giá, đồng thời giới thiệu khuyến mãi 20% cho khách hàng mới. \r\n    Giá một bộ M66 là 1.000.000 VNĐ. Hãy yêu cầu cung cấp thông tin địa chỉ và số điện thoại của khách hàng để xác nhận đơn hàng. Link ảnh M66 là https://mailisa.com/wp-content/uploads/2024/10/M66-1.jpg.webp\r\n    \"#\r\n    user_prompt #\"\r\n      tôi cần mua 1 bộ M66\r\n    \"#\r\n    message_history [{\r\n      role \"user\"\r\n      content \"xin chào\"\r\n    },\r\n    {\r\n      role \"assistant\",\r\n      content \"Chào bạn, tôi có thể giúp gì cho bạn?\"\r\n    }]\r\n  }\r\n}\r\n",
    "utils.baml": "class BAMLMessage {\r\n  role \"user\" | \"assistant\"\r\n  content string\r\n}\r\nclass ChatResponseItem {\r\n  type \"text\" | \"image\" | \"video\" | \"audio\" | \"file\" | \"link\" @description(#\"\r\n    The type of the content. The type can be one of the following:\r\n    - \"text\": The content is a text message.\r\n    - \"image\": The content is a URL to an image.\r\n    - \"video\": The content is a URL to a video.\r\n    - \"audio\": The content is a URL to an audio file.\r\n    - \"file\": The content is a URL to a file.\r\n    - \"link\": The content is a URL to a link. If a response item is a \"link\" type, the previous response should be \"text\" type with description for this link.\r\n  \"#)\r\n  payload string @description(#\"\r\n    The content of the response. The type of the content is determined by the type field.\r\n    The content is a string if the type is \"text\".\r\n    The content is a URL if the type is \"image\", \"video\", \"audio\", or \"file\".\r\n  \"#)\r\n}\r\n// Inject a list of \"assistant\" or \"user\" messages into the prompt.\r\ntemplate_string PrintMessageHistory(messages: BAMLMessage[]) #\"\r\n  {% if messages|length > 0 %}\r\n    {% if \"notexist\" in ctx.client.name|lower %}\r\n      {% for m in messages %}\r\n        {% if m.role == \"user\" %}\r\n        <start_of_turn>user\r\n        {{ m.content }}<end_of_turn>\\n\r\n        {% else %}\r\n        <start_of_turn>model\r\n        {{ m.content }}<end_of_turn>\\n\r\n        {% endif %}\r\n      {% endfor %}\r\n    {% else %}\r\n      Here is the previous chat history:\r\n      {% for m in messages %}\r\n        {{ _.role(m.role) }}\r\n        {{ m.content }}\r\n      {% endfor %}\r\n    {% endif %}\r\n  {% endif %}\r\n\"#\r\n\r\ntemplate_string PrintSystemPrompt(system_prompt: string) #\"\r\n  {% if system_prompt %}\r\n    {% if \"notexist\" in ctx.client.name|lower %}\r\n      <start_of_turn>user\r\n      {{ system_prompt }}<end_of_turn>\\n\r\n    {% else %}\r\n      {{ _.role(\"system\") }}\r\n      {{ system_prompt }}\r\n    {% endif %}\r\n  {% endif %}\r\n\"#\r\n\r\ntemplate_string GetUserPrompt(user_prompt: string, response: string) #\"\r\n    ---------------\r\n    {{ user_prompt }}\r\n    ---------------\r\n\r\n    {{ ctx.output_format }}\r\n    {{ response }}\r\n\"#\r\n\r\ntemplate_string PrintUserPrompt(user_prompt: string) #\"\r\n  {% if user_prompt %}\r\n    {% if \"notexist\" in ctx.client.name|lower %}\r\n      <start_of_turn>user\r\n      Current customer's message:\r\n      {{ user_prompt }}<end_of_turn>\\n\r\n    {% else %}\r\n      {{ _.role(\"user\") }}\r\n      \\n\\Answer customer's message:\r\n      {{ user_prompt }}\r\n    {% endif %}\r\n  {% endif %}\r\n\"#\r\n\r\ntemplate_string PrintAssistantPrompt(assistant_prompt: string) #\"\r\n  {% if assistant_prompt %}\r\n    {% if \"notexist\" in ctx.client.name|lower %}\r\n      <start_of_turn>model\r\n      {{ assistant_prompt }}<end_of_turn>\\n\r\n    {% else %}\r\n      {{ _.role(\"assistant\") }}\r\n      {{ assistant_prompt }}\r\n    {% endif %}\r\n  {% endif %}\r\n\"#\r\n\r\ntemplate_string CommonChainOfThoughts() #\"\r\n  Outline some relevant information before you answer.\r\n    Example:\r\n    - ...\r\n    - ...\r\n    ...\r\n    {\r\n      ... // schema\r\n    }\r\n\"#\r\n\r\ntemplate_string OutputStructureChainOfThought(action: string?) #\"\r\n    Before you answer, please explain your reasoning step-by-step.\r\n    {% if action %}{{ action }}{% endif %}\r\n    \r\n    For example:\r\n    If we think step by step we can see that ...\r\n    Therefore the output is:\r\n    {\r\n      ... // schema\r\n    }\r\n\"#\r\n\r\n// function GenericQuery(systemPrompt: string, userPrompt: string) -> string {\r\n//   client Gemini2FlashLite\r\n\r\n//   prompt #\"\r\n//     {{ _.role(\"system\") }}\r\n\r\n//     {{ systemPrompt }}\r\n\r\n//     {{ _.role(\"user\") }}\r\n//     {{ userPrompt }}\r\n//   \"#\r\n// }\r\n\r\n// test generic_query {\r\n//   functions [GenericQuery]\r\n//   args {\r\n//     systemPrompt \"Anwser in the voice of Pikachu.\"\r\n//     userPrompt \"What's the capital of France?\"\r\n//   }\r\n// }\r\n\r\n// class GenericStructuredResponse {\r\n//   @@dynamic\r\n// }\r\n\r\n// function GenericStructuredOutputCall(systemPrompt: string, userPrompt: string, messages: Message[]) -> GenericStructuredResponse{\r\n//   client Gemini2FlashLite\r\n\r\n//   prompt #\"\r\n//     {{ _.role(\"system\") }}\r\n\r\n//     {{ systemPrompt }}\r\n\r\n//     {{ _.role(\"user\") }}\r\n//     {{ userPrompt }}\r\n\r\n//     {{ ctx.output_format }}\r\n//     Give step by step reasoning before giving the final answer in JSON format.\r\n//     Make sure to provide all fields required by the schema unless otherwise specified.\r\n\r\n//     {{ PrintMessages(messages) }}\r\n//   \"#\r\n// }\r\n\r\n// test generic_structured_output_call {\r\n//   functions [GenericStructuredOutputCall]\r\n//   args {\r\n//     systemPrompt \"Anwser in the voice of Pikachu.\"\r\n//     userPrompt \"What's the capital of France?\"\r\n//     messages [{\r\n//         role \"user\"\r\n//         message \"hello world\"\r\n//       },\r\n//       {\r\n//         role \"assistant\",\r\n//         message \"The capital of France is Paris.\"\r\n//       }\r\n//     ]\r\n//   }\r\n// }",
}

def get_baml_files():
    return file_map